<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="Tool for ranking moe attributes." />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="favicon.ico" />

    <title>MoeRanker</title>

    <link rel="preload" href="assets/img/akarin.jpg" as="image" />
    <link rel="preload" href="assets/img/omedetou.gif" as="image" />

    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" /> -->
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.2.3/css/bootstrap.css" rel="stylesheet" />
    <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script> -->

    <style>
      @media (min-width: 1600px) {
        .container {
          max-width: 1520px !important;
        }
      }

      /* @media (max-width: 400px) {
        #mascot {
          display: none;
        }
      } */

      @media (max-width: 1200px) {
        #update-history {
          display: none;
        }
      }

      span.number-green {
        color: #00aa00;
      }

      span.number-red {
        color: #cc0000;
      }
    </style>
  </head>
  <body>
    <div class="container" style="margin-top: 50px">
      <div style="display: flex; justify-content: space-between">
        <!-- <div id="mascot" style="width: 180px; max-width: 30%; float: right">
        <a href="https://danbooru.donmai.us/posts/552914" target="_blank"><img src="assets/img/nagato-crop-transparent.png" alt="长门大萌神" style="width: 100%" /></a><br />
        <p style="width: 100%; text-align: center; font-size: 15pt">
          <a href="https://zh.moegirl.org.cn/长门有希" target="_blank" style="text-decoration: none; color: initial">吉祥物 长门大<span style="font-weight: bold; color: #11bb11">萌</span>神</a>
        </p>
      </div> -->
        <div style="flex-basis: 800px">
          <h1>
            <ruby>MoeRanker<rp>(</rp><rt>X P检测器</rt><rp>)</rp></ruby><sup> 1.0.1</sup>
          </h1>
          <p>
            by Zzzyt 2023, Github@<a href="https://github.com/Zzzzzzyt/MoeRanker" target="_blank">Zzzzzzyt/MoeRanker</a><br />
            <a href="https://zh.moegirl.org.cn/Mainpage" target="_blank">萌娘百科</a>数据截止至2022/9/15 <a href="https://bgm.tv/" target="_blank">Bangumi</a>数据截止至2023/1/15 <br />感谢广大词条编辑者的付出ヾ(•ω•`)o
          </p>
          <p>
            使用说明： 选择熟悉的作品，点击生成子集，开始评分。结果会在样本数足够时显示，实时更新，随时可以停止评分。<br />
            在<span class="number-red">-5</span>到<span class="number-green">5</span>之间为人物评分， 喜爱为<span class="number-green">5</span>，厌恶为<span class="number-red">-5</span>。<br />
            结果表格中评分为正则该<ruby>属性<rp>(</rp><rt>X P</rt><rp>)</rp></ruby>为正面，反之为反面，绝对值代表确信度。<br />
            图片来自bangumi自动映射，可能出现无图，多图，错图现象，<b>仅供参考，请以人名（萌百URL）为准。</b>启用<i>必须有图像</i>将保证至少有一张备选图片。 如果你<ruby>对指定的子集有充分了解<rp>(</rp><rt>二次元浓度极高</rt><rp>)</rp></ruby
            >，请尽量关闭该选项以提高样本数。子集名称后标注了(有映射数/总人数)，可供参考。点击人物和<ruby>属性<rp>(</rp><rt>X P</rt><rp>)</rp></ruby>的文字链接将跳转至萌百对应页面，点击图片将跳转至Bangumi。
          </p>
          <p>
            <b>注意：<span class="number-red">-5</span>和<span class="number-green">5</span>的权重很高，请勿滥用。</b>
            若无感，选0或±1，不认识（不能评价）则跳过，<b>但注意过度跳过会造成样本不足。</b><br />
            有图片映射错误现象或任何问题，欢迎在GitHub上<a href="https://github.com/Zzzzzzyt/MoeRanker/issues/new" target="_blank">发Issue</a>。
          </p>
        </div>
        <div id="update-history" style="max-width: 400px; flex-grow: 1; overflow-y: auto; max-height: 450px; padding-left: 20px">
          <h2>更新日志</h2>
          <p>
            v1.0.2 (2023-2-7): <br />
            - 计算结果添加滚动条<br />
            - 加入结果位置提示文本<br />
            - 加入更新日志一栏<br />
            - 改善文字对比度<br />
            - 移除长门大<span style="font-weight: bold; color: #11bb11">萌</span>神（太悲惨了） <del>长门有希的消失</del>
          </p>

          <p>
            v1.0.1 (2023-2-6): <br />
            - 修正了Bangumi top N子集大小≠N的问题<br />
            - 修正了对雷姆的映射，并稍微优化了映射算法<br />
          </p>
          <p>
            v1.0.0 (2023-2-5): <br />
            - 公测开始！<br />
            - 添加长门大<span style="font-weight: bold; color: #11bb11">萌</span>神
          </p>
        </div>
      </div>
      <hr />
      <div style="display: flex; flex-wrap: wrap">
        <div style="flex-grow: 1; width: 600px">
          <p style="font-size: 32pt">
            <a href="https://zh.moegirl.org.cn/不要停下来啊！" id="name" target="_blank">加载中</a>
          </p>
          <div class="input-group" style="max-width: 300px">
            <div class="input-group-text" style="background-color: #fff"><span id="progress-text">这里是进度</span></div>
            <button class="form-control btn btn-primary" onclick="revert();">撤销</button>
            <button class="form-control btn btn-primary" onclick="skip();">跳过</button>
          </div>
          <br />
          <button class="btn btn-danger" style="width: 50px; margin-bottom: 8px" onclick="score(-16);">-5</button>
          <button class="btn btn-danger" style="width: 50px; margin-bottom: 8px" onclick="score(-8);">-4</button>
          <button class="btn btn-danger" style="width: 50px; margin-bottom: 8px" onclick="score(-4);">-3</button>
          <button class="btn btn-danger" style="width: 50px; margin-bottom: 8px" onclick="score(-2);">-2</button>
          <button class="btn btn-danger" style="width: 50px; margin-bottom: 8px" onclick="score(-1);">-1</button>
          <button class="btn btn-warning" style="width: 50px; margin-bottom: 8px" onclick="score(0);">0</button>
          <button class="btn btn-success" style="width: 50px; margin-bottom: 8px" onclick="score(1);">1</button>
          <button class="btn btn-success" style="width: 50px; margin-bottom: 8px" onclick="score(2);">2</button>
          <button class="btn btn-success" style="width: 50px; margin-bottom: 8px" onclick="score(4);">3</button>
          <button class="btn btn-success" style="width: 50px; margin-bottom: 8px" onclick="score(8);">4</button>
          <button class="btn btn-success" style="width: 50px; margin-bottom: 8px" onclick="score(16);">5</button>
          <br />
          <br />
          <div id="images" style="width: 100%; margin-bottom: 20px; max-width: 600px; min-height: 500px; display: flex; flex-wrap: wrap"></div>
        </div>
        <div style="padding: 10px">
          <div id="subset-div"></div>
          <br />
          <div class="input-group">
            <div class="input-group-text">
              <input id="force-mapping" type="checkbox" class="form-check-input mt-0" checked />
              <span>&nbsp;<label for="force-mapping">必须有图像</label></span>
            </div>
            <button class="form-control btn btn-primary" onclick="reset();">生成子集</button>
          </div>
        </div>
        <div style="padding: 10px; flex-basis: 360px; max-height: 850px; overflow-x: hidden; overflow-y: auto">
          <p id="ranking-hint" style="min-width: 300px; text-align: center; font-size: 20pt; white-space: nowrap; color: #ccc; border: 2px #ccc solid">&nbsp;&nbsp;&nbsp;结果将显示在这里&nbsp;&nbsp;&nbsp;</p>
          <table id="ranking-table" class="table table-bordered" style="min-width: 300px; display: none">
            <thead>
              <th scope="col">No.</th>
              <th scope="col">属性</th>
              <th scope="col">评分</th>
              <th scope="col">debug</th>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>
  </body>
  <script src="assets/js/main.js"></script>
  <!-- <script>
    fetch("data/test_stat_data.json")
      .then((res) => res.json())
      .then((res) => {
        stat = res;
        compute();
      });
  </script> -->
</html>
